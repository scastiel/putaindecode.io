{"head":{"layout":"Post","comments":true,"date":"2017-12-21","title":"Découverte de Preact","tags":["preact","react"],"authors":["drazik"],"description":"Preact est une alternative à React. Plus précisément, voici sa description officielle : Fast 3kB alternative to React with the same ES6…"},"body":"<p>Preact est une alternative à React. Plus précisément, voici sa description\nofficielle :</p>\n<blockquote>\n<p>Fast 3kB alternative to React with the same ES6 API.</p>\n</blockquote>\n<p>Cette description semble alléchante au premier coup d'oeil. Si on peut avoir un\nReact de 3ko, banco, on switch !</p>\n<p>Pas si vite. L'API est la même, mais rien n'indique que Preact est un React qui\ntient dans 3 petits ko (bien que c'est ce qu'on peut parfois lire). Ça ferait\nbien longtemps que les ingénieurs de Facebook auraient réagit s'il était\npossible de faire en sorte que React soit si petit. Preact fait donc des\ncompromis, des choix, et présente donc des différences avec React qu'il faut\nconnaître et prendre en compte avant d'envisager de switcher.</p>\n<p><em>Cet article est destiné aux gens qui connaissent déjà au moins un petit peu\nReact. Tous les concepts liés à (P)React ne seront pas détaillés. Si vous ne\nconnaissez rien à React, je vous invite à lire <a href=\"/fr/articles/js/react/\">l'introduction à\nReact</a>.</em></p>\n<h2 id=\"quelles-sont-les-différences-entre-react-et-preact-\"><a href=\"#quelles-sont-les-diff%C3%A9rences-entre-react-et-preact-\" class=\"phenomic-HeadingAnchor\">#</a>Quelles sont les différences entre React et Preact ?</h2>\n<p>Les différences entre React et Preact peuvent être rangées dans deux catégories\n: ce qu'il \"manque\" à Preact, et ce qui est là, mais différent.</p>\n<h3 id=\"ce-quil-manque\"><a href=\"#ce-quil-manque\" class=\"phenomic-HeadingAnchor\">#</a>Ce qu'il \"manque\"</h3>\n<p>Premièrement, Preact se concentre uniquement sur le DOM. Cela signifie qu'il\nn'existe pas d'équivalent à\n<a href=\"https://facebook.github.io/react-native/\">react-native</a>,\n<a href=\"https://facebook.github.io/react-vr/\">react-vr</a> ou tout autre\n<a href=\"http://iamdustan.com/react-renderers/\">renderer</a> du côté de Preact. Celui-ci a\npour but d'afficher du DOM le plus efficacement possible.</p>\n<p>Cette spécialisation pour le DOM permet à Preact de ne pas avoir à implémenter\nle système de Synthetic Events utilisé par React. Ainsi, Preact peut se\npermettre d'utiliser simplement le système d'événements standard du navigateur.\nIl faut bien avoir cela en tête lorsqu'on a l'habitude de travailler avec\nReact, car celui-ci corrige, ou du moins unifie certains comportements entre\nles navigateurs (notamment sur <code>onChange</code>). Des différences dans le\ncomportement de votre app est donc à prévoir en cas de switch.</p>\n<p>Preact n'embarque pas de gestion de validation des PropTypes. Partant du\nprincipe que celles-ci ne sont pas utilisées par tout le monde, la décision a\nété prise de ne pas les inclure dans le coeur de la bibliothèque.</p>\n<p>Pour finir, Preact n'expose pas (encore, tout du moins) les nouvelles APIs de\nReact 16 telles que <code>React.Fragment</code> (dont <a href=\"https://github.com/developit/preact/issues/946\">le support est\nprévu</a>),\n<code>ReactDOM.createPortal</code> (la fonctionnalité existe tout de même sous une forme\ndifférente dans <a href=\"https://github.com/developit/preact-portal\">preact-portal</a>) ou\n<code>ReactDOM.hydrate</code>.</p>\n<h3 id=\"ce-qui-est-différent\"><a href=\"#ce-qui-est-diff%C3%A9rent\" class=\"phenomic-HeadingAnchor\">#</a>Ce qui est différent</h3>\n<p>Preact utilise la bibliothèque\n<a href=\"https://github.com/hyperhype/hyperscript\">hyperscript</a>, qui est une version\ngénérique de <code>React.createElement</code>. Le résultat est le même, la signature de la\nfonction <code>h()</code> exposée par hyperscript étant la même que celle de\n<code>React.createElement</code>. Il faudra quand même indiquer au compiler qu'il doit\nutiliser cette fonction pour transpiler le JSX.</p>\n<p>La méthode <code>render()</code> des composants reçoit toujours <code>this.props</code> et\n<code>this.state</code> en paramètres, ce qui permet de les destructurer directement dans\nles paramètres de la fonction, et ainsi de les traiter comme s'ils étaient\neux-mêmes des paramètres.</p>\n<p>Preact gère l'API <code>context</code>, mais il n'existe pas de <code>contextTypes</code> ni de\n<code>childContextTypes</code> (ce qui est raccord avec l'absence de <code>propTypes</code>). Tous\nles enfants reçoivent le <code>context</code> définit dans la méthode <code>getChildContext()</code>\nde leurs parents. Si plusieurs parents implémentent cette méthode, alors les\ndescendants recevront un agrégat.</p>\n<p>Dans Preact, <code>props.children</code> est un <code>Array</code>. On peut donc utiliser toutes les\nméthodes de <code>Array.prototype</code> dessus, sans avoir à passer par un équivalent de\n<code>React.Children</code>. Toutefois, certains patterns tels que le <em>function as child</em>\nnécessitent un peu de bricolage pour fonctionner.</p>\n<p>Enfin, il est possible d'utiliser l'attribut <code>class</code> sur un noeud JSX.\n<code>className</code> est aussi supporté, mais vous ne vous prendrez plus d'erreur\nlorsque votre esprit se croira dans un fichier HTML et vous fera écrire\n<code>class</code>.</p>\n<h2 id=\"comment-démarrer-un-projet-preact-\"><a href=\"#comment-d%C3%A9marrer-un-projet-preact-\" class=\"phenomic-HeadingAnchor\">#</a>Comment démarrer un projet Preact ?</h2>\n<p>Pour démarrer sur de bonnes bases, le plus simple est d'utiliser\n<a href=\"https://github.com/developit/preact-cli\"><code>preact-cli</code></a>. C'est un outil en\nligne de commande qui vous permet de créer toute la structure de base de votre\napplication. Si vous connaissez <code>create-react-app</code>, alors vous aurez deviné que\n<code>preact-cli</code> est l'équivalent pour Preact.</p>\n<p>Commençons par l'installer : </p>\n<pre><code class=\"hljs language-console\">npm install -g preact-cli</code></pre>\n<p>Nous avons maintenant accès à la commande <code>preact</code>. Celle-ci s'utilise de la\nmanière suivante :</p>\n<pre><code class=\"hljs language-console\">preact create &#x3C;template-name> &#x3C;project-name></code></pre>\n<p>Où <code>&#x3C;template-name></code> est le nom d'un template officiel (listé sur l'org GitHub\n<a href=\"https://github.com/preactjs-templates\"><code>preactjs-template</code></a>) ou un repository\nGitHub contenant un dossier <code>template</code> (de la forme <code>&#x3C;username>/&#x3C;repository></code>);\net <code>&#x3C;project-name></code> est le nom du dossier dans lequel la structure du projet\nsera créée. Pour notre exemple, nous utiliserons le template <code>default</code>, et le\nnom <code>test-preact</code> pour notre projet :</p>\n<pre><code class=\"hljs language-console\">preact create default test-preact</code></pre>\n<p>En utilisant le template <code>default</code>, nous obtenons une application qui embarque\npar défaut :</p>\n<ul>\n<li>Du code-splitting pour chaque route</li>\n<li>Votre page <code>index.html</code> prérendue pour un affichage le plus rapide possible</li>\n<li>Un ServiceWorker prêt à l'emploi (score Lighthouse 100/100 à la génération de\nl'app, ce score est bien évidemment dépendant de ce que vous faites par la\nsuite)</li>\n<li>Des metas preload en fonction de vos URL</li>\n<li>Des polyfills chargés uniquement si nécessaire</li>\n</ul>\n<p>Il ne vous reste plus qu'à écrire votre app sur ces bases solides ! Pour\ninformation, le routing est géré par\n<a href=\"https://github.com/developit/preact-router\"><code>preact-router</code></a>.</p>\n<h2 id=\"jutilise-react-je-peux-switcher-sur-preact-\"><a href=\"#jutilise-react-je-peux-switcher-sur-preact-\" class=\"phenomic-HeadingAnchor\">#</a>J'utilise React, je peux switcher sur Preact ?</h2>\n<p>Oui, et pour ça il y a deux possibilités : ajouter une couche de compatibilité,\nou passer purement et simplement à Preact. </p>\n<h3 id=\"rendre-preact-quasi-compatible-avec-react-en-utilisant-preact-compat\"><a href=\"#rendre-preact-quasi-compatible-avec-react-en-utilisant-preact-compat\" class=\"phenomic-HeadingAnchor\">#</a>Rendre Preact quasi-compatible avec React en utilisant <code>preact-compat</code></h3>\n<p>Le plus rapide est d'utiliser\n<a href=\"https://github.com/developit/preact-compat\"><code>preact-compat</code></a>. Ce module vient\ns'ajouter à Preact pour y ajouter une couche de compatibilité le rendant\ncompatible avec preque n'importe quel module écrit pour React (tant que\ncelui-ci n'utilise pas les quelques bouts d'API manquants). Pour cela,\n<code>preact-compat</code> expose l'ensemble de l'API de <code>react</code> et <code>react-dom</code>. Cela vous\npermettra de continuer à utiliser sereinement tous vos composants écrits\nspécifiquement pour React, ainsi que vous son écosystème.</p>\n<p>Il faut donc l'installer, ainsi que Preact :</p>\n<pre><code class=\"hljs language-console\">npm install --save preact preact-compat</code></pre>\n<p>Puis il faut ajouter des alias à votre système de build, afin que tous vos\nimports de <code>react</code> et <code>react-dom</code> soient reroutés vers <code>preact-compat</code>. Par\nexemple, pour webpack :</p>\n<pre><code class=\"hljs language-javasscript\"><span class=\"hljs-keyword\">module</span>.exports = {\n    <span class=\"hljs-comment\">//... votre configuration webpack</span>\n    resolve: {\n        <span class=\"hljs-keyword\">alias</span>: {\n            <span class=\"hljs-string\">\"react\"</span>: <span class=\"hljs-string\">\"preact-compat\"</span>,\n            <span class=\"hljs-string\">\"react-dom\"</span>: <span class=\"hljs-string\">\"preact-compat\"</span>\n        }\n    }\n}</code></pre>\n<p>Si vous n'utilisez pas webpack, votre système de build est très certainement\nlisté sur la\n<a href=\"https://github.com/developit/preact-compat#preact-compat\">documentation</a>.</p>\n<p>Cette solution a l'avantage d'être très rapide à mettre en place. Toutefois, le\nprincipal avantage de Preact est son poids de seulement 3ko. En ajoutant\n<code>preact-compat</code>,vous ajouterez environ 2ko supplémentaires. Ce n'est pas\nénorme, surtout si on prend en compte les avantages que ce module apporte, mais\nil est possible de ne pas avoir à ajouter cette couche de compatibilité.</p>\n<h3 id=\"passer-complètement-à-preact\"><a href=\"#passer-compl%C3%A8tement-%C3%A0-preact\" class=\"phenomic-HeadingAnchor\">#</a>Passer complètement à Preact</h3>\n<p>Cette solution est un peu plus longue à mettre en place, mais si votre code\nn'est pas dépendant d'un module qui utilise des parties de l'API de React qui\nne sont pas prises en compte par Preact, alors elle vous permettra d'obtenir le\nbundle le plus léger possible.</p>\n<p>Premièrement, il faut installer Preact :</p>\n<pre><code class=\"hljs language-console\">npm install --save preact</code></pre>\n<p>Puis il faut indiquer à votre compiler le pragma JSX qu'il doit utiliser. Pour\nbabel, vous pouvez installer le plugin <code>babel-plugin-transform-react-jsx</code> :</p>\n<pre><code class=\"hljs language-console\">npm instal --save-dev babel-plugin-transform-react-jsx</code></pre>\n<p>Puis indiquer le pragma JSX dans les options de ce plugin dans votre fichier\n<code>.babelrc</code> :</p>\n<pre><code class=\"hljs language-js\">{\n    <span class=\"hljs-string\">\"plugins\"</span>: [\n        [<span class=\"hljs-string\">\"transform-react-jsx\"</span>, { <span class=\"hljs-string\">\"pragma\"</span>: <span class=\"hljs-string\">\"h\"</span> }]\n    ]\n}</code></pre>\n<p><em>Même si vous connaissez React, cette histoire de pragma JSX pourrait ne pas\nvous évoquer grand chose. Si vous souhaitez en savoir plus, je vous conseille\nde lire l'article suivant : <a href=\"https://jasonformat.com/wtf-is-jsx/\">WTF is JSX</a>.\nSi vous utilisez React et n'avez jamais eu à configurer ce pragma, c'est parce\nque la plupart des compilers utilisent le pragma <code>@jsx React.createElement</code> par\ndéfaut.</em></p>\n<p>Si vous utilisez une version de React qui n'est pas à jour, il est possible que\nvotre codebase utilise l'ancienne syntaxe <code>React.createClass()</code>. Dans ce cas,\nil faut que vous installiez\n<a href=\"https://github.com/laurencedorman/preact-classless-component\"><code>preact-classless-component</code></a>,\nou que vous passiez votre codebase dans le\n<a href=\"https://github.com/vutran/preact-codemod\"><code>preact-codemod</code></a> qui transformera\nvos composants en classes ES6. De même, il se peut que vous utilisiez des\nréférences par chaîne de caractères, qui ne sont pas supportées par Preact.\nDans ce cas, il faudra les transformer en références fonctionnelles.</p>\n<p>Il ne vous reste plus qu'à mettre à jour vos imports pour que ceux-ci pointent\nvers Preact. Voici un petit exemple :</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">import</span> { h, Component, render } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"preact\"</span>;\n\n<span class=\"hljs-keyword\">const</span> Header = <span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =></span> &#x3C;header>Ma putain d<span class=\"hljs-string\">'app&#x3C;/header>;\n\nclass App extends Component {\n    render() {\n        return (\n            &#x3C;div>\n                &#x3C;Header />\n                &#x3C;main>\n                    Hello, world !\n                &#x3C;/main>\n            &#x3C;/div>\n        ); \n    }\n}\n\nrender(&#x3C;App />, document.getElementById(\"app\"));</span></code></pre>\n<p>Voilà, vous avez maintenant une aperçu de ce qu'est Preact et des moyens à\nvotre disposition pour l'utiliser. Facebook ne vous est plus d'aucune utilité,\nvous pouvez fermer votre compte.</p>\n<p>Plus sérieusement, nous avons vu que Preact est en grande partie compatible\navec React et peut presque le remplacer sur une app web. Cela nécessite tout de\nmême un peu de travail et de vigilance, mais le switch est possible et peut\nvous permettre de faire économiser à vos utilisateurs le téléchargement de\nprécieux ko.</p>\n","rawBody":"\nPreact est une alternative à React. Plus précisément, voici sa description\nofficielle :\n\n> Fast 3kB alternative to React with the same ES6 API.\n\nCette description semble alléchante au premier coup d'oeil. Si on peut avoir un\nReact de 3ko, banco, on switch !\n\nPas si vite. L'API est la même, mais rien n'indique que Preact est un React qui\ntient dans 3 petits ko (bien que c'est ce qu'on peut parfois lire). Ça ferait\nbien longtemps que les ingénieurs de Facebook auraient réagit s'il était\npossible de faire en sorte que React soit si petit. Preact fait donc des\ncompromis, des choix, et présente donc des différences avec React qu'il faut\nconnaître et prendre en compte avant d'envisager de switcher.\n\n*Cet article est destiné aux gens qui connaissent déjà au moins un petit peu\nReact. Tous les concepts liés à (P)React ne seront pas détaillés. Si vous ne\nconnaissez rien à React, je vous invite à lire [l'introduction à\nReact](/fr/articles/js/react/).*\n\n## Quelles sont les différences entre React et Preact ?\n\nLes différences entre React et Preact peuvent être rangées dans deux catégories\n: ce qu'il \"manque\" à Preact, et ce qui est là, mais différent.\n\n### Ce qu'il \"manque\" \n\nPremièrement, Preact se concentre uniquement sur le DOM. Cela signifie qu'il\nn'existe pas d'équivalent à\n[react-native](https://facebook.github.io/react-native/),\n[react-vr](https://facebook.github.io/react-vr/) ou tout autre\n[renderer](http://iamdustan.com/react-renderers/) du côté de Preact. Celui-ci a\npour but d'afficher du DOM le plus efficacement possible.\n\nCette spécialisation pour le DOM permet à Preact de ne pas avoir à implémenter\nle système de Synthetic Events utilisé par React. Ainsi, Preact peut se\npermettre d'utiliser simplement le système d'événements standard du navigateur.\nIl faut bien avoir cela en tête lorsqu'on a l'habitude de travailler avec\nReact, car celui-ci corrige, ou du moins unifie certains comportements entre\nles navigateurs (notamment sur `onChange`). Des différences dans le\ncomportement de votre app est donc à prévoir en cas de switch.\n\nPreact n'embarque pas de gestion de validation des PropTypes. Partant du\nprincipe que celles-ci ne sont pas utilisées par tout le monde, la décision a\nété prise de ne pas les inclure dans le coeur de la bibliothèque.\n\nPour finir, Preact n'expose pas (encore, tout du moins) les nouvelles APIs de\nReact 16 telles que `React.Fragment` (dont [le support est\nprévu](https://github.com/developit/preact/issues/946)),\n`ReactDOM.createPortal` (la fonctionnalité existe tout de même sous une forme\ndifférente dans [preact-portal](https://github.com/developit/preact-portal)) ou\n`ReactDOM.hydrate`.\n\n### Ce qui est différent\n\nPreact utilise la bibliothèque\n[hyperscript](https://github.com/hyperhype/hyperscript), qui est une version\ngénérique de `React.createElement`. Le résultat est le même, la signature de la\nfonction `h()` exposée par hyperscript étant la même que celle de\n`React.createElement`. Il faudra quand même indiquer au compiler qu'il doit\nutiliser cette fonction pour transpiler le JSX.\n\nLa méthode `render()` des composants reçoit toujours `this.props` et\n`this.state` en paramètres, ce qui permet de les destructurer directement dans\nles paramètres de la fonction, et ainsi de les traiter comme s'ils étaient\neux-mêmes des paramètres.\n\nPreact gère l'API `context`, mais il n'existe pas de `contextTypes` ni de\n`childContextTypes` (ce qui est raccord avec l'absence de `propTypes`). Tous\nles enfants reçoivent le `context` définit dans la méthode `getChildContext()`\nde leurs parents. Si plusieurs parents implémentent cette méthode, alors les\ndescendants recevront un agrégat.\n\nDans Preact, `props.children` est un `Array`. On peut donc utiliser toutes les\nméthodes de `Array.prototype` dessus, sans avoir à passer par un équivalent de\n`React.Children`. Toutefois, certains patterns tels que le *function as child*\nnécessitent un peu de bricolage pour fonctionner.\n\nEnfin, il est possible d'utiliser l'attribut `class` sur un noeud JSX.\n`className` est aussi supporté, mais vous ne vous prendrez plus d'erreur\nlorsque votre esprit se croira dans un fichier HTML et vous fera écrire\n`class`.\n\n## Comment démarrer un projet Preact ?\n\nPour démarrer sur de bonnes bases, le plus simple est d'utiliser\n[`preact-cli`](https://github.com/developit/preact-cli). C'est un outil en\nligne de commande qui vous permet de créer toute la structure de base de votre\napplication. Si vous connaissez `create-react-app`, alors vous aurez deviné que\n`preact-cli` est l'équivalent pour Preact.\n\nCommençons par l'installer : \n\n```console\nnpm install -g preact-cli\n```\n\nNous avons maintenant accès à la commande `preact`. Celle-ci s'utilise de la\nmanière suivante :\n\n```console\npreact create <template-name> <project-name>\n```\n\nOù `<template-name>` est le nom d'un template officiel (listé sur l'org GitHub\n[`preactjs-template`](https://github.com/preactjs-templates)) ou un repository\nGitHub contenant un dossier `template` (de la forme `<username>/<repository>`);\net `<project-name>` est le nom du dossier dans lequel la structure du projet\nsera créée. Pour notre exemple, nous utiliserons le template `default`, et le\nnom `test-preact` pour notre projet :\n\n```console\npreact create default test-preact\n```\n\nEn utilisant le template `default`, nous obtenons une application qui embarque\npar défaut :\n\n* Du code-splitting pour chaque route\n* Votre page `index.html` prérendue pour un affichage le plus rapide possible\n* Un ServiceWorker prêt à l'emploi (score Lighthouse 100/100 à la génération de\nl'app, ce score est bien évidemment dépendant de ce que vous faites par la\nsuite)\n* Des metas preload en fonction de vos URL\n* Des polyfills chargés uniquement si nécessaire\n\nIl ne vous reste plus qu'à écrire votre app sur ces bases solides ! Pour\ninformation, le routing est géré par\n[`preact-router`](https://github.com/developit/preact-router).\n\n## J'utilise React, je peux switcher sur Preact ?\n\nOui, et pour ça il y a deux possibilités : ajouter une couche de compatibilité,\nou passer purement et simplement à Preact. \n\n### Rendre Preact quasi-compatible avec React en utilisant `preact-compat`\n\nLe plus rapide est d'utiliser\n[`preact-compat`](https://github.com/developit/preact-compat). Ce module vient\ns'ajouter à Preact pour y ajouter une couche de compatibilité le rendant\ncompatible avec preque n'importe quel module écrit pour React (tant que\ncelui-ci n'utilise pas les quelques bouts d'API manquants). Pour cela,\n`preact-compat` expose l'ensemble de l'API de `react` et `react-dom`. Cela vous\npermettra de continuer à utiliser sereinement tous vos composants écrits\nspécifiquement pour React, ainsi que vous son écosystème.\n\nIl faut donc l'installer, ainsi que Preact :\n\n```console\nnpm install --save preact preact-compat\n```\n\nPuis il faut ajouter des alias à votre système de build, afin que tous vos\nimports de `react` et `react-dom` soient reroutés vers `preact-compat`. Par\nexemple, pour webpack :\n\n```javasscript\nmodule.exports = {\n    //... votre configuration webpack\n    resolve: {\n        alias: {\n            \"react\": \"preact-compat\",\n            \"react-dom\": \"preact-compat\"\n        }\n    }\n}\n```\n\nSi vous n'utilisez pas webpack, votre système de build est très certainement\nlisté sur la\n[documentation](https://github.com/developit/preact-compat#preact-compat).\n\nCette solution a l'avantage d'être très rapide à mettre en place. Toutefois, le\nprincipal avantage de Preact est son poids de seulement 3ko. En ajoutant\n`preact-compat`,vous ajouterez environ 2ko supplémentaires. Ce n'est pas\nénorme, surtout si on prend en compte les avantages que ce module apporte, mais\nil est possible de ne pas avoir à ajouter cette couche de compatibilité.\n\n### Passer complètement à Preact\n\nCette solution est un peu plus longue à mettre en place, mais si votre code\nn'est pas dépendant d'un module qui utilise des parties de l'API de React qui\nne sont pas prises en compte par Preact, alors elle vous permettra d'obtenir le\nbundle le plus léger possible.\n\nPremièrement, il faut installer Preact :\n\n```console\nnpm install --save preact\n```\n\nPuis il faut indiquer à votre compiler le pragma JSX qu'il doit utiliser. Pour\nbabel, vous pouvez installer le plugin `babel-plugin-transform-react-jsx` :\n\n```console\nnpm instal --save-dev babel-plugin-transform-react-jsx\n```\n\nPuis indiquer le pragma JSX dans les options de ce plugin dans votre fichier\n`.babelrc` :\n\n```js\n{\n    \"plugins\": [\n        [\"transform-react-jsx\", { \"pragma\": \"h\" }]\n    ]\n}\n```\n\n*Même si vous connaissez React, cette histoire de pragma JSX pourrait ne pas\nvous évoquer grand chose. Si vous souhaitez en savoir plus, je vous conseille\nde lire l'article suivant : [WTF is JSX](https://jasonformat.com/wtf-is-jsx/).\nSi vous utilisez React et n'avez jamais eu à configurer ce pragma, c'est parce\nque la plupart des compilers utilisent le pragma `@jsx React.createElement` par\ndéfaut.*\n\nSi vous utilisez une version de React qui n'est pas à jour, il est possible que\nvotre codebase utilise l'ancienne syntaxe `React.createClass()`. Dans ce cas,\nil faut que vous installiez\n[`preact-classless-component`](https://github.com/laurencedorman/preact-classless-component),\nou que vous passiez votre codebase dans le\n[`preact-codemod`](https://github.com/vutran/preact-codemod) qui transformera\nvos composants en classes ES6. De même, il se peut que vous utilisiez des\nréférences par chaîne de caractères, qui ne sont pas supportées par Preact.\nDans ce cas, il faudra les transformer en références fonctionnelles.\n\nIl ne vous reste plus qu'à mettre à jour vos imports pour que ceux-ci pointent\nvers Preact. Voici un petit exemple :\n\n```javascript\nimport { h, Component, render } from \"preact\";\n\nconst Header = () => <header>Ma putain d'app</header>;\n\nclass App extends Component {\n    render() {\n        return (\n            <div>\n                <Header />\n                <main>\n                    Hello, world !\n                </main>\n            </div>\n        ); \n    }\n}\n\nrender(<App />, document.getElementById(\"app\"));\n```\n\nVoilà, vous avez maintenant une aperçu de ce qu'est Preact et des moyens à\nvotre disposition pour l'utiliser. Facebook ne vous est plus d'aucune utilité,\nvous pouvez fermer votre compte.\n\nPlus sérieusement, nous avons vu que Preact est en grande partie compatible\navec React et peut presque le remplacer sur une app web. Cela nécessite tout de\nmême un peu de travail et de vigilance, mais le switch est possible et peut\nvous permettre de faire économiser à vos utilisateurs le téléchargement de\nprécieux ko.\n","__filename":"fr/articles/js/preact/index.md","__url":"/fr/articles/js/preact/","__resourceUrl":"/fr/articles/js/preact/index.html","__dataUrl":"/fr/articles/js/preact/index.html.deca5637140ddab486ce8e926ab9284b.json"}